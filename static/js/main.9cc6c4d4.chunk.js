(this.webpackJsonpaeorzia=this.webpackJsonpaeorzia||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(8),i=n.n(c),s=n(7),o=n(1),u=n(6),l=n(2),h=n(5),d=n(4),m=function e(){Object(o.a)(this,e),this.name="",this.enemies=[],this.heroes=[],this.objects=[],this.isBattleScene=!1,this.isDefeatScene=!1,this.isVictoryScene=!1,this.victory=!1,this.droppedItems=[],Object(l.d)(this,{name:l.e,enemies:l.e,heroes:l.e,objects:l.e,droppedItems:l.e})},f=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="victory_scene",e.isVictoryScene=!0,e}return n}(m),g=function(){function e(){Object(o.a)(this,e),this.add_delay=500}return Object(u.a)(e,null,[{key:"Roll",value:function(e){return Math.floor(Math.random()*e+1)}},{key:"RollFromString",value:function(e){for(var t=0,n=e.split("d")[0],r=e.split("d")[1],a=0;a<n;a++)t+=this.Roll(r);return t}},{key:"log",value:function(e){console.log(e),V.combat_log.push(e)}}]),e}(),j=n(9),v=function e(){var t=this;Object(o.a)(this,e),this.name="",this.description="",this.onUse=function(e,n){console.log(t.user,"used",t.name,"on",t.target)},this.value=0,this.id=Object(j.a)()},b=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="Fur",e.description="A potion of some kind",e}return n}(v),p=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="Potion",e.description="A potion of some kind",e}return n}(v),A={NONE:[],SMALL_CREATURE:[new p,new b]},O={SLASHING_DAMAGE:"SLASHING_DAMAGE",PIERCING_DAMAGE:"PIERCING_DAMAGE",FIRE_DAMAGE:"FIRE_DAMAGE",FROST_DAMAGE:"FROST_DAMAGE",EARTH_DAMAGE:"EARTH_DAMAGE",LIGHTNING_DAMAGE:"LIGHTNING_DAMAGE",FORCE_DAMAGE:"FORCE_DAMAGE",HEALING:"HEALING",NATURE_DAMAGE:"NATURE_DAMAGE"},y=function e(t){var n=this;Object(o.a)(this,e),this.name="",this.image=null,this.id=Object(j.a)(),this.description="",this.isDead=!1,this.isHero=!1,this.isTurnActive=!1,this.strength=10,this.dexterity=10,this.constitution=10,this.intelligence=10,this.charisma=10,this.experience=0,this.health=1,this.armor_class=10,this.items=[],this.max_ap=10,this.current_ap=10,this.DROP_TABLE=A.NONE,this.actions=[{name:"attack",onExecute:function(e){if(n.current_ap>=2){n.current_ap=n.current_ap-2,g.log("".concat(n.name," attacked! ").concat(e.name));var t=g.Roll(20),r=g.Roll(n.strength);t>=e.armor_class?(g.log("".concat(n.name," hits! with a damage of ").concat(r)),e.health=e.health-r):g.log(n.name+" missed! their target "+e.name+" with a roll of "+t)}else g.log(n.name+" Not enough AP!")}},{name:"examine",onExecute:function(e){n.current_ap>=1?(n.current_ap--,g.log("".concat(e.description))):g.log("".concat(n.name," Not enough AP!"))}},{name:"Items",onExecute:function(e){n.current_ap>=1?(n.current_ap--,g.log("".concat(n.name," used an item action on ").concat(e.name))):g.log(n.name+" Not enough AP!")}}],this.onSkillUsedOn=function(e,t){if(t.current_ap>=e.apCost){g.log("".concat(t.name," used ").concat(e.skillName," on ").concat(n.name)),t.current_ap-=e.apCost;var r=g.RollFromString(e.damageRoll);e.damageType===O.HEALING&&(r=-r),g.log("".concat(t.name," Rolled for (").concat(e.damageRoll,")  [").concat(r," ").concat(e.damageType,"]")),n.health-=r}},this.name=t,Object(l.d)(this,{isDead:l.e,isHero:l.e,isTurnActive:l.e,strength:l.e,dexterity:l.e,constitution:l.e,intelligence:l.e,charisma:l.e,experience:l.e,health:l.e,armor_class:l.e,items:l.e,max_ap:l.e,current_ap:l.e})},_={SINGLE_TARGET:"SINGLE_TARGET",MULTI_TARGET:"MULTI_TARGET"},x={skillName:"Sparks",damageRoll:"4d3",damageType:O.LIGHTNING_DAMAGE,apCost:2,description:"Sparks and more sparks, a common skills used my mages around the new year..",targetType:_.SINGLE_TARGET},E={skillName:"Fireball",damageRoll:"1d12",damageType:O.FIRE_DAMAGE,apCost:2,description:"Summons a burning ball of fire",targetType:_.SINGLE_TARGET},T={skillName:"Cure",damageRoll:"1d12",damageType:O.HEALING,apCost:2,description:"Use the restorative forces of the aether to heal an ally",targetType:_.SINGLE_TARGET},k={skillName:"Bite",damageRoll:"1d6",damageType:O.PIERCING_DAMAGE,apCost:2,description:"ima bite ya",targetType:_.SINGLE_TARGET},I={skillName:"Scratch",damageRoll:"1d4",damageType:O.PIERCING_DAMAGE,apCost:2,description:"ima scratch ya",targetType:_.SINGLE_TARGET},N=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="bat",e.description="A furry bat",e.health=5,e.dexterity=10,e.strength=5,e.armor_class=1,e.DROP_TABLE=A.SMALL_CREATURE,e.image="https://cdn.pixabay.com/photo/2013/07/12/13/26/bat-147038_1280.png",e.skills=[k],e}return n}(y),G=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="dog",e.description="A furry dog",e.health=10,e.dexterity=10,e.strength=5,e.armor_class=4,e.DROP_TABLE=A.SMALL_CREATURE,e.image="https://cdn.pixabay.com/photo/2013/07/12/15/02/dog-149300_1280.png",e.skills=[k],e}return n}(y),R=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="racoon",e.description="A furry racoon",e.health=5,e.dexterity=10,e.strength=5,e.armor_class=1,e.DROP_TABLE=A.SMALL_CREATURE,e.skills=[I],e}return n}(y),S={ZONE_1:[[N,N,N,N],[G,N,N],[R,N,G],[R],[G,G]]},M=n.p+"static/media/mountains.fa9d67f4.jpg",D=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="defeat_scene",e.isDefeatScene=!0,e}return n}(m),w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="battle_scene1a",e.isBattleScene=!0,e.background_image=M,e}return n}(function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getActorsByInitiative",value:function(){return this.heroes.concat(this.enemies).sort((function(e,t){return e.dexterity<t.dexterity})).filter((function(e){return!e.isDead}))}},{key:"getAllActorsByInitiative",value:function(){return this.heroes.concat(this.enemies).sort((function(e,t){return e.dexterity<t.dexterity}))}},{key:"getActiveActor",value:function(){return this.getActorsByInitiative().find((function(e){return!0===e.isTurnActive}))}},{key:"getActiveHero",value:function(){var e=this.heroes.filter((function(e){return!0===e.isTurnActive}));return 0==e.length?[]:e}},{key:"getInactiveHeroes",value:function(){return this.heroes.filter((function(e){return!1===e.isTurnActive}))}},{key:"enemiesDead",value:function(){var e=!0;return this.enemies.forEach((function(t){!1===t.isDead&&(e=!1)})),e}},{key:"heroesDead",value:function(){var e=!0;return this.enemies.forEach((function(t){!1===t.isDead&&(e=!1)})),e}},{key:"setDeathStatus",value:function(){this.getActorsByInitiative().forEach((function(e){e.health<=0&&(e.isDead=!0)}))}},{key:"clearTurnState",value:function(){this.getAllActorsByInitiative().forEach((function(e){e.isTurnActive=!1}))}},{key:"resetPartyAP",value:function(){this.heroes.forEach((function(e){e.current_ap=e.max_ap}))}},{key:"setActiveTurn",value:function(){var e=0;for(this.getAllActorsByInitiative().forEach((function(t,n){t.isTurnActive&&(e=n)})),this.getAllActorsByInitiative()[e].isTurnActive=!1,e>=this.getAllActorsByInitiative().length-1?e=0:e++;!0===this.getAllActorsByInitiative()[e].isDead;)e>=this.getAllActorsByInitiative().length-1?e=0:e++;this.getAllActorsByInitiative()[e].isTurnActive=!0}},{key:"nextTurn",value:function(){var e=this;this.setDeathStatus(),this.enemiesDead()?(g.log("Victory!"),g.log("----------------------------------------------------------"),this.generateLootDrops(),this.victory=!0):(this.setActiveTurn(),this.getActiveActor().current_ap=this.getActiveActor().max_ap,this.getActiveActor().isHero||setTimeout((function(){return e.startEnemyTurn()}),500))}},{key:"startCombat",value:function(){g.log("combat started!"),console.log(this.getActorsByInitiative()),this.clearTurnState(),this.resetPartyAP(),this.getAllActorsByInitiative()[0].isTurnActive=!0,this.getActiveActor().isHero?this.startHeroTurn():this.startEnemyTurn()}},{key:"startHeroTurn",value:function(){g.log("Hero turn started!")}},{key:"startEnemyTurn",value:function(){g.log("Enemy turn started!");var e=this.getActiveActor(),t=g.Roll(this.heroes.filter((function(e){return!e.isDead})).length);t--;var n=this.heroes.filter((function(e){return!e.isDead}))[t];null!=n?(n.onSkillUsedOn(e.skills[0],e),this.nextTurn()):(V.sceneManager.changeScene(new D),g.log("Your party was defeated.."))}},{key:"generateLootDrops",value:function(){var e=this.getAllActorsByInitiative().filter((function(e){return!1===e.isHero}))[0];this.droppedItems=e.DROP_TABLE}},{key:"transferItem",value:function(e){this.getActiveActor().items.push(e),this.droppedItems=this.droppedItems.filter((function(t){return t.id!==e.id}))}},{key:"generateGoldReward",value:function(){return null==this.gold_reward&&(this.gold_reward=100*this.enemies.length*(1+g.Roll(50)/100)),this.gold_reward}}]),n}(m)),C=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"GenerateBattle",value:function(e){var t=S[e],n=g.Roll(t.length)-1,r=[];t[n].forEach((function(e){r.push(new e)}));var a=new w(r);return a.enemies=r,a}},{key:"GenerateBattles",value:function(e,t){for(var n=[],r=0;r<t;r++)n.push(this.GenerateBattle(e));return n}}]),e}(),L=function(){function e(t){Object(o.a)(this,e),this.scenes=C.GenerateBattles("ZONE_1",5),this.current_scene="",Object(l.d)(this,{current_scene:l.e}),this.current_scene=this.scenes[0],this.current_scene.heroes=t}return Object(u.a)(e,[{key:"getCurrentIndex",value:function(){return this.scenes.indexOf(this.current_scene)}},{key:"loadNextScene",value:function(){var e=this.getCurrentIndex();this.current_scene=null,this.current_scene=this.scenes[e+1],null==this.current_scene?this.current_scene=new f:(this.current_scene.heroes=V.heroes,this.current_scene.startCombat())}},{key:"changeScene",value:function(e){var t=this.current_scene.heroes;e.heroes=t,this.current_scene=e}}]),e}(),B=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).strength=12,e.dexterity=12,e.constitution=12,e.intelligence=12,e.charisma=12,e.isHero=!0,e.health=10,e.max_ap=2,e.current_ap=2,e.items=[new p],e.skills=[x,E,T],e}return n}(y),H=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="felen",e}return n}(B),P=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="Elumbar",e}return n}(B),F=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="ingos",e}return n}(B),U=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="varne",e}return n}(B),V=new(function(){function e(){Object(o.a)(this,e),this.names=["varne","felen","elumbar","ingos"],this.combat_log=[],this.heroes=[new H,new P,new F,new U],this.sceneManager=new L(this.heroes),this.partyGold=0,Object(l.d)(this,{partyGold:l.e,combat_log:l.e})}return Object(u.a)(e,[{key:"getRandomName",value:function(){var e=Math.floor(Math.random()*this.names.length)-1;return this.names.splice(e,1)[0]}},{key:"getHeroes",value:function(){return this.heroes}}]),e}()),z=n(0),J=a.a.createContext("");window.instance=V;var Y=function(e){var t=e.children,n=Object(s.b)((function(){return V}));return console.log("store from Provider",V),Object(z.jsx)(J.Provider,{value:n,children:t})},Z=function(){return a.a.useContext(J)},W=(n(18),function(){var e=Z(),t=function(e){var t=e.isHero?"hero":"enemy";return e.isTurnActive&&(t+=" selected"),e.isDead&&(t+=" dead"),t};return Object(z.jsx)(s.a,{children:function(){return Object(z.jsx)("div",{className:"turn-container",children:(null!=e.sceneManager.current_scene.getActorsByInitiative?e.sceneManager.current_scene.getActorsByInitiative():[]).map((function(e){return Object(z.jsxs)("div",{className:"actor "+t(e),children:[" ",e.name]},e.id+"turn-order")}))})}})}),X=n(10),q=(n(19),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).updateScrollPosition=function(e){if(e.current)if(0!==e.current.childNodes.length){var t=Array.from(e.current.childNodes)[e.current.childNodes.length-1];console.log(t),setTimeout((function(){return t.scrollIntoView({behavior:"smooth"})}),100)}else console.log("null case")},a.gameStore=V,a.logRef=Object(r.createRef)(null),a}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(z.jsx)(s.a,{children:function(){return Object(z.jsxs)("div",{className:"panel",children:[e.updateScrollPosition(e.logRef),Object(z.jsx)("div",{ref:e.logRef,class:"combat-log",children:e.gameStore.combat_log.map((function(e){return Object(z.jsx)("div",{className:"message",children:e})}))})]})}})}}]),n}(a.a.Component)),K=function(){var e=Z(),t=a.a.useState(""),n=Object(X.a)(t,2),r=n[0],c=n[1],i=a.a.useState(""),o=Object(X.a)(i,2),u=o[0],l=o[1],h=a.a.useState(""),d=Object(X.a)(h,2),m=d[0],f=d[1],g=function(e,t,n){l(n),c(e),f(t)},j=function(){console.log("Turn ended"),e.sceneManager.current_scene.nextTurn()};return Object(z.jsx)(s.a,{children:function(){return Object(z.jsxs)("div",{className:"hero-sheet-container",children:[e.sceneManager.current_scene.heroes.map((function(t){return Object(z.jsx)("div",{className:"panel text-medium",children:Object(z.jsxs)("div",{className:t.isDead?"character-sheet dead":"character-sheet",children:[Object(z.jsx)("div",{children:t.name}),t.actions.map((function(e){return Object(z.jsx)("button",{disabled:!t.isTurnActive,style:{display:"block"},onClick:function(){return g(!0,e)},children:Object(z.jsx)("strong",{children:e.name})},t.id)})),t.skills.map((function(e){return Object(z.jsx)("button",{disabled:!t.isTurnActive,onClick:function(){return g(!0,m,e)},children:e.skillName})})),e.sceneManager.current_scene.enemies.map((function(e){return r&&t.isTurnActive&&!e.isDead&&Object(z.jsxs)("button",{onClick:function(){return function(e,t){u?e.onSkillUsedOn(u,t):m.onExecute(e),c(!1),l(null),0===t.current_ap&&j()}(e,t)},children:[e.name," | ",e.health]},e.id)})),Object(z.jsxs)("div",{children:["AP: ",t.current_ap," "]}),Object(z.jsxs)("div",{children:["Health: ",t.health," "]}),Object(z.jsx)("div",{"data-descr":"STR:"+t.strength+" DEX:"+t.dexterity+" CON:"+t.constitution+" INT:"+t.intelligence+" CHAR:"+t.charisma,children:"Stats"}),Object(z.jsx)("div",{children:Object(z.jsx)("strong",{children:"Items"})}),t.items.map((function(e){return Object(z.jsx)("div",{children:e.name})})),Object(z.jsx)("button",{disabled:!t.isTurnActive,onClick:function(){return j()},children:"end turn"})]})})})),Object(z.jsx)(q,{})]})}})},Q=(n(20),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).computeBackgroundStyle=function(){return{backgroundImage:"url(".concat(V.sceneManager.current_scene.background_image,")")}},e.nextScene=function(){V.partyGold+=Math.floor(V.sceneManager.current_scene.gold_reward),V.sceneManager.loadNextScene()},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){V.sceneManager.current_scene.startCombat()}},{key:"render",value:function(){var e=this;return Object(z.jsx)(s.a,{children:function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"panel no-padding",children:Object(z.jsxs)("div",{className:"scene-area",style:e.computeBackgroundStyle(),children:[Object(z.jsxs)("div",{className:"monster-area",children:[V.sceneManager.current_scene.enemies.map((function(e){return!e.isDead&&Object(z.jsxs)("div",{className:"monster",children:[Object(z.jsxs)("div",{children:[e.name," | ac: ",e.armor_class," | hp: ",e.health]}),Object(z.jsx)("img",{src:e.image?e.image:""})]},e.id+"monster-area")})),V.sceneManager.current_scene.victory&&Object(z.jsxs)("div",{className:"reward-container",children:[Object(z.jsx)("div",{children:"Victory! rewards:"}),Object(z.jsxs)("div",{children:[" Gold: ",V.sceneManager.current_scene.generateGoldReward()]}),Object(z.jsx)("div",{children:"Items "}),V.sceneManager.current_scene.droppedItems.map((function(e){return Object(z.jsxs)("div",{className:"item",children:[e.name,Object(z.jsx)("span",{children:Object(z.jsx)("button",{onClick:function(){return V.sceneManager.current_scene.transferItem(e)},children:"Take"})})]})})),Object(z.jsx)("button",{onClick:function(){return e.nextScene()},children:"Next"})]})]}),Object(z.jsx)(W,{})]})}),Object(z.jsx)(K,{})]})}})}}]),n}(a.a.Component)),$=function(){return Object(z.jsx)(z.Fragment,{children:"Game Over"})},ee=function(){return Object(z.jsxs)(z.Fragment,{children:["Victory! You WON!",Object(z.jsx)("img",{alt:"nope",src:"https://www.zeldadungeon.net/wp-content/uploads/2013/12/animation_debut8-article_image.jpg"})]})},te=(n(21),function(){var e=Z();return Object(z.jsx)(s.a,{children:function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"panel text-medium",children:[e.sceneManager.current_scene.name," - Gold:",e.partyGold]}),e.sceneManager.current_scene.isBattleScene&&Object(z.jsx)(Q,{}),e.sceneManager.current_scene.isDefeatScene&&Object(z.jsx)($,{}),e.sceneManager.current_scene.isVictoryScene&&Object(z.jsx)(ee,{})]})}})});n(22),n(23);var ne=function(){return Object(z.jsx)("div",{className:"main-content",children:Object(z.jsx)(te,{})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(Y,{children:Object(z.jsx)(ne,{})})}),document.getElementById("root")),re()}},[[24,1,2]]]);
//# sourceMappingURL=main.9cc6c4d4.chunk.js.map